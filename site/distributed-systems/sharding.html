
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sharding</title>
    <meta name="description" content="Explains the concept of sharding in distributed systems, its approaches and implications.">
    <link rel="canonical" href="https://notes.elimelt.com/distributed-systems/sharding.html">
    <link rel="stylesheet" href="/css/styles.css">
    <script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "headline": "Sharding", "dateModified": "2025-02-11T16:42:07.824937", "description": "Explains the concept of sharding in distributed systems, its approaches and implications.", "url": "https://notes.elimelt.com/distributed-systems/sharding.html", "articleSection": "Distributed Systems", "keywords": "sharding,consistent hashing,indirection tables,load balancing,data distribution"}</script>
</head>
<body>
    <header>
        <nav><a href="https://github.com/elimelt/notes" style="font-size:24px; color: white;" class="fa">&#xf09b;</a> | <a href="/index.html">Home</a> | <a href="/categories/index.html">Categories</a> | <a href="/tags/index.html">Tags</a></nav>
        <div class="breadcrumbs"><a href="/index.html">Home</a> » <a href="/categories/distributed%20systems.html">Distributed Systems</a> » Sharding</div>
    </header>
    <main class="content">
        <h1>Sharding</h1>
        <h1 id="sharding"><a class="toclink" href="#sharding">Sharding</a></h1>
<h2 id="consistent-hashing"><a class="toclink" href="#consistent-hashing">Consistent Hashing</a></h2>
<p>A classic approach is to maintain a modular space of hashed keys, and use the regions between shards to assign keys. This is known as <strong>consistent hashing</strong>. It works, but has some drawbacks:</p>
<ul>
<li><strong>Load Imbalance</strong>: If the keys are not evenly distributed, some shards will be more heavily loaded than others.</li>
<li><strong>Hotspots</strong>: If the keys are not evenly distributed, some shards will be more heavily loaded than others.</li>
<li><strong>Data Migration</strong>: When adding a new shard, keys need to be moved around, which can be expensive.</li>
</ul>
<h2 id="indirection-tables"><a class="toclink" href="#indirection-tables">Indirection Tables</a></h2>
<p>A cooler approach in my opinion. Just put a table of <code>hash(key) -&gt; server address</code> on every client, and assign fewer table entries to buckets with more keys. This way, the load is more evenly distributed. You can then broadcast any changes to the table to every client server.</p>
    </main>
    <footer>
        <p>&copy; 2025 Notes Site</p>
    </footer>
</body>
</html>
    
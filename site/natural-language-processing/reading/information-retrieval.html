
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indexing and Information Retrieval | Elijah's Notes</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Covers indexing and retrieval techniques in Information Retrieval (IR), including term weighting with tf-idf, inverted index construction, evaluation metrics such as MAP, and dense vector-based approaches using BERT. It also touches on ad hoc retrieval, stop words, and precision/recall trade-offs. The focus is on the technical implementation of IR algorithms.">
    <meta name="author" content="Elijah Melton">
    <meta name="robots" content="index, follow">
    <meta name="generator" content="Custom Static Site Generator">
    <link rel="canonical" href="https://notes.elimelt.com/natural-language-processing/reading/information-retrieval.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Indexing and Information Retrieval">
    <meta property="og:description" content="Covers indexing and retrieval techniques in Information Retrieval (IR), including term weighting with tf-idf, inverted index construction, evaluation metrics such as MAP, and dense vector-based approaches using BERT. It also touches on ad hoc retrieval, stop words, and precision/recall trade-offs. The focus is on the technical implementation of IR algorithms.">
    <meta property="og:url" content="https://notes.elimelt.com/natural-language-processing/reading/information-retrieval.html">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Indexing and Information Retrieval">
    <meta name="twitter:description" content="Covers indexing and retrieval techniques in Information Retrieval (IR), including term weighting with tf-idf, inverted index construction, evaluation metrics such as MAP, and dense vector-based approaches using BERT. It also touches on ad hoc retrieval, stop words, and precision/recall trade-offs. The focus is on the technical implementation of IR algorithms.">

    <meta name="keywords" content="tf-idf,inverted index,precision,recall,interpolated_precision_curve,mean_average_precision,dense_vectors,bert">

    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json">
    {"@context": "https://schema.org", "@type": "Article", "headline": "Indexing and Information Retrieval", "dateModified": "2025-02-11T20:01:21.027963", "description": "Covers indexing and retrieval techniques in Information Retrieval (IR), including term weighting with tf-idf, inverted index construction, evaluation metrics such as MAP, and dense vector-based approaches using BERT. It also touches on ad hoc retrieval, stop words, and precision/recall trade-offs. The focus is on the technical implementation of IR algorithms.", "articleSection": "Natural Language Processing", "keywords": "tf-idf,inverted index,precision,recall,interpolated_precision_curve,mean_average_precision,dense_vectors,bert"}
    </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js"></script>

    <!-- Configure KaTeX auto-render -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "\[", right: "\]", display: true},
                    {left: "$", right: "$", display: false},
                ],
                preProcess: (math) => {
                    console.log("Pre-processing: " + math);
                    math = math.split("\n").map((line) => {
                        if (line.endsWith("\\")) {
                            return line + "\\";
                        }
                        return line;
                    }).join("\n");
                    return math;
                },
                throwOnError: false
            });
        });
    </script>

<style>

/* Taxonomy Pages Enhancement - Add this to your existing CSS */

/* Taxonomy List Container */
.taxonomy-container {
    margin: var(--spacing-lg) 0;
}

/* Alphabet Jump Navigation */
.alphabet-nav {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: var(--spacing-lg);
    position: sticky;
    top: 60px; /* Adjust based on your nav height */
    background: var(--background-color);
    padding: var(--spacing-sm) 0;
    z-index: 10;
    border-bottom: 1px solid var(--border-color);
}

.alphabet-nav a {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    border-radius: var(--radius-sm);
    background: var(--border-color);
    text-decoration: none;
    font-weight: 500;
    transition: all var(--transition-speed);
}

.alphabet-nav a:hover, .alphabet-nav a:focus {
    background: var(--accent-color);
    color: white;
}

.alphabet-nav a.empty {
    opacity: 0.4;
    cursor: default;
}

.alphabet-nav a.empty:hover {
    background: var(--border-color);
    color: var(--text-color);
}

/* Alphabet Section */
.alphabet-section {
    margin-bottom: var(--spacing-lg);
    scroll-margin-top: 120px; /* Ensures the section isn't hidden behind sticky elements */
}

.alphabet-section h2 {
    font-size: 1.8rem;
    padding-bottom: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
    border-bottom: 2px solid var(--accent-color);
    color: var(--accent-color);
}

/* Enhanced List Styling */
.taxonomy-list {
    list-style: none;
    padding: 0;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: var(--spacing-md);
}

.taxonomy-list li {
    display: flex;
    align-items: center;
    padding: var(--spacing-sm);
    border-radius: var(--radius-sm);
    background: var(--accent-light);
    transition: all var(--transition-speed);
}

.taxonomy-list li:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.taxonomy-list a {
    flex: 1;
    display: block;
    text-decoration: none;
    font-weight: 500;
}

.taxonomy-list .count {
    background: var(--accent-color);
    color: white;
    padding: 0.1rem 0.5rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 700;
}

/* Search Box */
.taxonomy-search {
    margin-bottom: var(--spacing-lg);
    width: 100%;
}

.search-container {
    position: relative;
}

.search-container input {
    width: 100%;
    padding: var(--spacing-md);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    background: var(--background-color);
    color: var(--text-color);
    font-size: 1rem;
    transition: all var(--transition-speed);
}

.search-container input:focus {
    outline: none;
    border-color: var(--accent-color);
    box-shadow: 0 0 0 2px var(--accent-light);
}

.search-icon {
    position: absolute;
    right: var(--spacing-md);
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-color);
    opacity: 0.5;
}

/* No Results Message */
.no-results {
    padding: var(--spacing-lg);
    text-align: center;
    background: var(--border-color);
    border-radius: var(--radius-md);
    margin: var(--spacing-lg) 0;
}

/* Tag Cloud for Tags Page */
.tag-cloud {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
    margin: var(--spacing-lg) 0;
}

.tag-cloud a {
    display: inline-block;
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-sm);
    background: var(--border-color);
    color: var(--text-color);
    text-decoration: none;
    transition: all var(--transition-speed);
    margin-bottom: var(--spacing-sm);
}

.tag-cloud a:hover {
    background: var(--accent-color);
    color: white;
    transform: translateY(-2px);
}

/* Tag sizes based on frequency */
.tag-xs { font-size: 0.8rem; }
.tag-sm { font-size: 0.9rem; }
.tag-md { font-size: 1rem; }
.tag-lg { font-size: 1.2rem; }
.tag-xl { font-size: 1.5rem; }

/* Category Summary Cards */
.category-cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--spacing-md);
    margin: var(--spacing-lg) 0;
}

.category-card {
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    transition: all var(--transition-speed);
    background: var(--background-color);
}

.category-card:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-md);
    border-color: var(--accent-color);
}

.category-card h3 {
    margin-top: 0;
    margin-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--border-color);
    padding-bottom: var(--spacing-sm);
}

.category-card .page-count {
    color: var(--accent-color);
    font-weight: bold;
}

.category-card .sample-pages {
    margin-top: var(--spacing-sm);
    font-size: 0.9rem;
}

.category-card .sample-pages a {
    display: block;
    margin-bottom: var(--spacing-sm);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.category-card .view-all {
    display: block;
    text-align: right;
    margin-top: var(--spacing-sm);
    font-weight: 500;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .taxonomy-list {
        grid-template-columns: 1fr;
    }

    .alphabet-nav {
        gap: 0.3rem;
    }

    .alphabet-nav a {
        width: 1.8rem;
        height: 1.8rem;
        font-size: 0.9rem;
    }

    .category-cards {
        grid-template-columns: 1fr;
    }
}

/* Dark mode adjustments */
@media (prefers-color-scheme: dark) {
    .taxonomy-list li {
        background: rgba(96, 165, 250, 0.1);
    }

    .category-card {
        background: var(--background-color);
    }
}

/* Animation for items appearing when filtering */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.taxonomy-list li {
    animation: fadeIn 0.3s ease-out;
}

/* Google Fonts Import */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Merriweather:ital,wght@0,400;0,700;1,400;1,700&display=swap');

/* Base Typography Settings */
.content {
    /* Layout and spacing */
    margin-top: 2rem;
    max-width: 70ch;
    margin-left: auto;
    margin-right: auto;
    padding: 0 1.5rem;

    /* Base font settings */
    font-family: 'Merriweather', Georgia, serif;
    font-size: clamp(1rem, 0.95rem + 0.25vw, 1.125rem);
    line-height: 1.75;
    font-weight: 400;

    /* Color and contrast */
    color: rgba(0, 0, 0, 0.87);
    background-color: #fff;

    /* Text rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;

    /* Better spacing */
    letter-spacing: 0.01em;
    word-spacing: 0.05em;

    /* Hyphenation for better text flow */
    hyphens: auto;
    -webkit-hyphens: auto;
    -ms-hyphens: auto;
}

/* Heading Typography */
.content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-weight: 700;
    line-height: 1.3;
    margin-top: 2.5rem;
    margin-bottom: 1rem;
    color: rgba(0, 0, 0, 0.9);
}

.content h1 {
    font-size: clamp(1.75rem, 1.3rem + 2.25vw, 2.5rem);
    letter-spacing: -0.02em;
}

.content h2 {
    font-size: clamp(1.5rem, 1.2rem + 1.5vw, 2rem);
    letter-spacing: -0.015em;
}

.content h3 {
    font-size: clamp(1.25rem, 1.1rem + 0.75vw, 1.5rem);
    letter-spacing: -0.01em;
}

/* Paragraph spacing */
.content p {
    margin-bottom: 1.5rem;
}

.content p + p {
    text-indent: 0.5rem; /* Optional: slight indent for paragraphs after other paragraphs */
}

/* Links with advanced styling */
.content a {
    color: #0366d6;
    text-decoration: none;
    background-image: linear-gradient(transparent calc(100% - 2px), currentColor 2px);
    background-size: 0% 100%;
    background-repeat: no-repeat;
    transition: background-size 0.3s ease-in-out;
}

.content a:hover {
    background-size: 100% 100%;
}

/* Lists with improved spacing */
.content ul, .content ol {
    padding-left: 1.75rem;
    margin-bottom: 1.5rem;
}

.content li {
    margin-bottom: 0.5rem;
}

/* Blockquotes with elegant styling */
.content blockquote {
    margin: 2rem 0;
    padding: 1rem 1.5rem;
    border-left: 4px solid rgba(0, 0, 0, 0.1);
    background-color: rgba(0, 0, 0, 0.02);
    font-style: italic;
    color: rgba(0, 0, 0, 0.75);
}

.content blockquote p:last-child {
    margin-bottom: 0;
}

/* Code blocks */
.content pre, .content code {
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
    font-size: 0.9em;
    background-color: rgba(0, 0, 0, 0.04);
    border-radius: 3px;
}

.content code {
    padding: 0.2em 0.4em;
}

.content pre {
    padding: 1rem;
    overflow-x: auto;
    margin: 1.5rem 0;
}

/* Images */
.content img {
    max-width: 100%;
    height: auto;
    border-radius: 4px;
    display: block;
    margin: 2rem auto;
}

/* Tables */
.content table {
    width: 100%;
    border-collapse: collapse;
    margin: 2rem 0;
    font-size: 0.95em;
}

.content th, .content td {
    padding: 0.75rem;
    border: 1px solid rgba(0, 0, 0, 0.1);
}

.content th {
    background-color: rgba(0, 0, 0, 0.03);
    font-weight: 600;
    text-align: left;
}

/* Figure and captions */
.content figure {
    margin: 2rem 0;
}

.content figcaption {
    margin-top: 0.5rem;
    font-size: 0.875rem;
    color: rgba(0, 0, 0, 0.6);
    text-align: center;
    font-family: 'Inter', sans-serif;
}

/* Advanced features for better reading */
@media (min-width: 768px) {
    .content {
        /* Better paragraph rhythm using CSS Grid */
        display: grid;
        grid-template-columns: minmax(0, 1fr);
        row-gap: 0rem;

        /* Drop cap for first paragraph */
    }

    .markdown-content p:first-of-type::first-letter {
        float: left;
        font-size: 3.5em;
        line-height: 0.8;
        padding-right: 0.1em;
        font-weight: 700;
    }

    /* Improve reading with advanced CSS columns for certain elements */
    .content .two-column {
        column-count: 2;
        column-gap: 2.5rem;
        column-rule: 1px solid rgba(0, 0, 0, 0.1);
    }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
    .content {
        color: rgba(255, 255, 255, 0.87);
        background-color: #1a1a1a;
    }

    .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
        color: rgba(255, 255, 255, 0.95);
    }

    .content a {
        color: #58a6ff;
    }

    .content blockquote {
        border-left-color: rgba(255, 255, 255, 0.2);
        background-color: rgba(255, 255, 255, 0.05);
        color: rgba(255, 255, 255, 0.7);
    }

    .content pre, .content code {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .content th, .content td {
        border-color: rgba(255, 255, 255, 0.1);
    }

    .content th {
        background-color: rgba(255, 255, 255, 0.05);
    }
}

/* High contrast mode for accessibility */
@media (forced-colors: active) {
    .content a {
        background-image: none;
        text-decoration: underline;
    }
}

/* Print styles for better printing experience */
@media print {
    .content {
        font-size: 12pt;
        line-height: 1.5;
        color: #000;
    }

    .content a {
        text-decoration: underline;
        color: #000;
        background-image: none;
    }

    .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
        page-break-after: avoid;
    }

    .content p, .content blockquote, .content ul, .content ol {
        orphans: 3;
        widows: 3;
    }
}

/* Advanced font features */
.content {
    font-feature-settings: 'kern' 1, 'liga' 1, 'calt' 1, 'pnum' 1, 'tnum' 0, 'onum' 1, 'lnum' 0, 'dlig' 0;
}

.content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
    font-feature-settings: 'kern' 1, 'liga' 1, 'calt' 1, 'pnum' 1, 'tnum' 0, 'onum' 0, 'lnum' 1, 'dlig' 1;
}

/* Selection styling */
.content ::selection {
    background-color: rgba(0, 102, 204, 0.2);
    text-shadow: none;
}

:root {
    --text-color: #1a1a1a;
    --background-color: #ffffff;
    --accent-color: #2563eb;
    --accent-light: rgba(37, 99, 235, 0.1);
    --border-color: #e5e7eb;
    --nav-background: rgba(255, 255, 255, 0.95);
    --code-background: #f3f4f6;
    --transition-speed: 0.2s;
    --content-width: 50rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 1rem;
    --spacing-lg: 2rem;
    --spacing-xl: 3rem;
    --radius-sm: 4px;
    --radius-md: 8px;
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.05);
    --shadow-md: 0 4px 6px rgba(0,0,0,0.05), 0 1px 3px rgba(0,0,0,0.1);
}

@media (prefers-color-scheme: dark) {
    :root {
        --text-color: #f3f4f6;
        --background-color: #1a1a1a;
        --accent-color: #60a5fa;
        --accent-light: rgba(96, 165, 250, 0.1);
        --border-color: #374151;
        --nav-background: rgba(26, 26, 26, 0.95);
        --code-background: #2d3748;
    }
}

/* Reset and base styles */
*, *::before, *::after {
    box-sizing: border-box;
}

html {
    font-size: 100%;
    scroll-behavior: smooth;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    line-height: 1.6;
    max-width: var(--content-width);
    margin: 0 auto;
    padding: var(--spacing-md);
    color: var(--text-color);
    background: var(--background-color);
    transition: background-color var(--transition-speed), color var(--transition-speed);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

@media (min-width: 768px) {
    body {
        padding: var(--spacing-lg);
    }
}

/* Improved navigation */
nav {
    position: sticky;
    top: 0;
    background: var(--nav-background);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--border-color);
    padding: var(--spacing-md) 0;
    margin: calc(-1 * var(--spacing-md));
    margin-bottom: var(--spacing-lg);
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
    z-index: 1000;
    width: calc(100% + var(--spacing-md) * 2);
    padding-left: var(--spacing-md);
    padding-right: var(--spacing-md);
    box-shadow: var(--shadow-sm);
}

@media (min-width: 768px) {
    nav {
        margin: calc(-1 * var(--spacing-lg));
        width: calc(100% + var(--spacing-lg) * 2);
        padding-left: var(--spacing-lg);
        padding-right: var(--spacing-lg);
        gap: var(--spacing-md);
    }
}

nav a {
    color: var(--accent-color);
    text-decoration: none;
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-sm);
    transition: background-color var(--transition-speed), color var(--transition-speed);
    font-weight: 500;
}

nav a:hover, nav a:focus {
    background-color: var(--accent-light);
    outline: none;
}

nav a:focus-visible {
    outline: 2px solid var(--accent-color);
    outline-offset: 2px;
}

/* Improved breadcrumbs */
.breadcrumbs {
    margin-bottom: var(--spacing-lg);
    color: var(--text-color);
    opacity: 0.8;
    font-size: 0.9rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: center;
}

.breadcrumbs a {
    color: var(--accent-color);
    text-decoration: none;
    transition: color var(--transition-speed);
}

.breadcrumbs a:hover {
    text-decoration: underline;
}

.breadcrumbs span:not(:last-child)::after {
    content: "/";
    margin-left: 0.5rem;
    opacity: 0.5;
}

/* Article styles */
article {
    margin-bottom: var(--spacing-xl);
}

h1, h2, h3, h4, h5, h6 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-md);
    line-height: 1.3;
    font-weight: 600;
}

h1 {
    font-size: 2rem;
    margin-top: 0;
}

h2 {
    font-size: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
}

/* Meta information styling */
.meta {
    color: var(--text-color);
    opacity: 0.8;
    font-size: 0.9rem;
    margin-bottom: var(--spacing-lg);
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-md);
    padding-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--border-color);
}

/* Improved code blocks */
code {
    background: var(--code-background);
    padding: 0.2rem 0.4rem;
    border-radius: var(--radius-sm);
    font-size: 0.9em;
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
}

pre {
    background: var(--code-background);
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
    overflow-x: auto;
    margin: var(--spacing-lg) 0;
    box-shadow: var(--shadow-sm);
}

pre code {
    background: none;
    padding: 0;
    border-radius: 0;
}

/* Improved links */
a {
    color: var(--accent-color);
    text-decoration: none;
    transition: color var(--transition-speed);
}

a:hover {
    text-decoration: underline;
}

/* Improved image handling */
img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    margin: var(--spacing-lg) 0;
    display: block;
    box-shadow: var(--shadow-md);
}

/* Table improvements */
table {
    width: 100%;
    border-collapse: collapse;
    margin: var(--spacing-lg) 0;
    overflow-x: auto;
    display: block;
    border-radius: var(--radius-sm);
    box-shadow: var(--shadow-sm);
}

@media (min-width: 768px) {
    table {
        display: table;
    }
}

th, td {
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    text-align: left;
}

th {
    background: var(--border-color);
    font-weight: 600;
}

/* Tags styling */
.tags {
    margin-top: var(--spacing-lg);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-color);
}

.tags a {
    display: inline-block;
    background: var(--border-color);
    color: var(--text-color);
    padding: 0.2rem 0.6rem;
    border-radius: var(--radius-sm);
    text-decoration: none;
    font-size: 0.9em;
    margin-right: 0.5rem;
    margin-bottom: 0.5rem;
    transition: background-color var(--transition-speed), color var(--transition-speed);
}

.tags a:hover {
    background: var(--accent-color);
    color: white;
    text-decoration: none;
}

/* Footer improvements */
footer {
    margin-top: var(--spacing-xl);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-color);
    text-align: center;
    font-size: 0.9rem;
    opacity: 0.8;
}

/* Blockquote styling */
blockquote {
    margin: var(--spacing-lg) 0;
    padding-left: var(--spacing-md);
    border-left: 4px solid var(--accent-color);
    color: var(--text-color);
    opacity: 0.9;
    font-style: italic;
}

/* Improved KaTeX rendering */
.katex-display {
    overflow: auto hidden;
    padding: var(--spacing-md) 0;
    margin: var(--spacing-md) 0;
    background: var(--accent-light);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
}

.katex-display > .katex {
    white-space: normal;
}

.katex {
    font-size: 1.1em;
    line-height: 1.2;
}

.katex-display .katex {
    display: block;
    text-align: center;
}

.katex-display > .katex > .katex-html {
    display: block;
    max-width: 100%;
    overflow-x: auto;
    padding: 0.5em 0;
    min-height: 40px;
}

/* Index page styling */
.landing-stats {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    justify-content: space-around;
}

.stat-item {
    text-align: center;
    padding: var(--spacing-md);
    background: var(--accent-light);
    border-radius: var(--radius-md);
    flex: 1;
    min-width: 100px;
    box-shadow: var(--shadow-sm);
}

.stat-value {
    display: block;
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--accent-color);
}

.stat-label {
    font-size: 0.9rem;
    opacity: 0.8;
}

.landing-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-lg);
}

@media (min-width: 768px) {
    .landing-grid {
        grid-template-columns: 3fr 1fr;
    }

    .recent-section {
        grid-column: 1 / 2;
    }

    .categories-section, .tags-section {
        grid-column: 2 / 3;
    }
}

.recent-posts, .categories-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.recent-posts li, .categories-list li {
    padding: var(--spacing-sm) 0;
    border-bottom: 1px solid var(--border-color);
}

.recent-posts li:last-child, .categories-list li:last-child {
    border-bottom: none;
}

.recent-posts .date, .recent-posts .category, .categories-list .count {
    font-size: 0.85rem;
    opacity: 0.7;
    margin-left: var(--spacing-sm);
}

.tags-cloud {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
}

.tags-cloud a {
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--border-color);
    border-radius: var(--radius-sm);
    text-decoration: none;
    transition: background-color var(--transition-speed), color var(--transition-speed);
}

.tags-cloud a:hover {
    background: var(--accent-color);
    color: white;
    text-decoration: none;
}

.tag-size-1 { font-size: 0.8rem; }
.tag-size-2 { font-size: 0.9rem; }
.tag-size-3 { font-size: 1rem; }
.tag-size-4 { font-size: 1.1rem; }
.tag-size-5 { font-size: 1.2rem; }

/* Focus styles for accessibility */
*:focus-visible {
    outline: 2px solid var(--accent-color);
    outline-offset: 2px;
}

/* Print styles */
@media print {
    nav, .breadcrumbs, .tags, footer {
        display: none;
    }

    body {
        max-width: none;
        padding: 0;
        color: black;
        background: white;
    }

    a {
        color: black;
        text-decoration: underline;
    }

    .content {
        max-width: 100%;
    }
}

</style></head>
<body>
    <header>
        <nav role="navigation" aria-label="Main navigation">
            <a href="/index.html">Home</a>
<a href="/categories/index.html">Categories</a>
<a href="/tags/index.html">Tags</a>
        </nav>
        <div class="breadcrumbs" role="navigation" aria-label="Breadcrumb">
            <a href="/index.html">Home</a> » <a href="/categories/natural%20language%20processing.html">Natural Language Processing</a> » Indexing and Information Retrieval
        </div>
    </header>
    <main role="main">
        <article>
            <h1>Indexing and Information Retrieval</h1>
            <div class="meta">
                <time datetime="2025-02-11T20:01:21.027963">
                    Last modified: 2025-02-11
                </time>
                <span>Category: <a href="/categories/natural%20language%20processing.html">Natural Language Processing</a></span>
            </div>
            <div class=markdown-content content>
                <h1 id="information-retrieval">Information Retrieval</h1>
<p>IR in general is the process of obtaining information based on user queries, and can be applied to pretty much any form of media. Probably the most prevalent form of IR that we use every day is through <strong>search engines</strong>.</p>
<h2 id="ad-hoc-retrieval">Ad Hoc Retrieval</h2>
<p>A user poses a <strong>query</strong> to a retrieval system, which then returns an ordered set of <strong>documents</strong> from some <strong>collection</strong>. A <strong>document</strong> refers to whatever unit of text the system indexes and retrieves (e.g. a webpage, a book, a tweet, etc.). The <strong>collection</strong> is the set of all documents that the system has indexed. A <strong>term</strong> can correspond to either a word, phrase, or some other unit of text which documents are indexed by. A query is therefore a set of terms.</p>
<p>A simple architecture for an IR system is as follows:</p>
<ul>
<li>Document collection in persistent storage</li>
<li>Indexing/Preprocessing module to convert documents into an inverted index</li>
<li>Query processing module to process user queries into query vectors</li>
<li>Search module to take in query vectors, which then searches the inverted index, returning a set of ranked documents</li>
</ul>
<pre><code class="language-txt">persistent storage
 +-----------+++
 | Documents ||| ----&gt; Indexing/Preprocessing ----&gt; Inverted Index
 +-----------+++                                         |
                                                         |
                                                         v

 User Query ---&gt; Query Processing ---(query vector)--&gt; Search
    ^                                                    |
    |                                                    |
    +---------------(ranked docs)------------------------+
</code></pre>
<p>Usually, we'll want to also persist the inverted index to disk, so that we don't have to recompute it every time we want to search, but online queries will at least usually be served by using an in-memory index.</p>
<p>We can map queries and documents both to vectors based on unigram word counts, and then use cosine similarity between vectors to rank documents. This is an example of the <strong>bag-of-words</strong> model, since words are considered independently of their positions.</p>
<h3 id="term-weighting-tf-idf">Term weighting (tf-idf)</h3>
<p>Using raw word counts isn't very effective. We instead compute a <strong>term weight</strong> for each document word (e.g. <strong>tf-idf</strong> or <strong>BM25</strong>). For tf-idf (term frequency-inverse document frequency), we compute the term frequency (tf) and inverse document frequency (idf) for each term in each document. The tf is the number of times a term appears in a document, and the idf is the log of the total number of documents divided by the number of documents containing the term. The tf-idf score is then the product of these two values.</p>
<p>$$
\text{tf}<em 10="10">{t, d} = \begin{cases}
    1 + \log</em>(t, d) &gt; 0 \
    0 &amp; \text{otherwise}
\end{cases}
$$} \text{count}(t, d) &amp; \text{if count</p>
<p>For intuition behind using $log$, if $w_1$ appears $100$ times in a document, and $w_2$ only once, it doesn't mean that $w_1$ is $100$ times more important. Note that alternative definitions of tf exist, e.g. $\log_{10}(1 + \text{count}(t, d))$.</p>
<p>On the other hand, the <strong>document frequency</strong> is the number of documents containing a term. The idf is then defined as:</p>
<p>$$
\text{idf}<em 10="10">t = \log</em> \right)
$$} \left( \frac{N}{\text{df}_t</p>
<p>where $N$ is the total number of documents in the collection. Therefore, for a word that is contained in <strong>every</strong> document, we'd have an $idf$ of 0. The tf-idf score is then:</p>
<p>$$
\text{tf-idf}<em d="d" t_="t,">{t, d} = \text{tf}</em>} \times \text{idf<em 10="10">t = \begin{cases}
    (1 + \log</em>(t, d) &gt; 0 \
    0 &amp; \text{otherwise}
\end{cases}
$$} \text{count}(t, d)) \times \log_{10} \left( \frac{N}{\text{df}_t} \right) &amp; \text{if count</p>
<h3 id="document-scoring">Document scoring</h3>
<p>We can then score a document $d$ by the cosine of its vector $v_d$ with the query vector $v_q$:</p>
<p>$$
\text{score}(q, d) = cos(v_q, v_d) = \frac{v_q \cdot v_d}{|v_q| |v_d|}
$$</p>
<p>Alternatively, you can think of the cosine as the dot product of the document and query unit vectors, e.g.:</p>
<p>$$
\text{score}(q, d) = cos(v_q, v_d) = \frac{v_t}{|v_q|} \cdot \frac{v_d}{|v_d|}
$$</p>
<p>Then, plugging in the tf-idf scores:</p>
<p>$$
\text{score}(q, d) = \sum_{t \in q} \frac{\text{tf-idf}<em _in="\in" q="q" q_i="q_i">{t, q}}{\sqrt{\sum</em>} \text{tf-idf}^2(q_i, q)}} \times \frac{\text{tf-idf<em _in="\in" d="d" d_i="d_i">{t, d}}{\sqrt{\sum</em>
$$} \text{tf-idf}^2(d_i, d)}</p>
<p>Many variations exist, particularly ones that drop terms in order to reduce computation required. A notable variant is <strong>BM25</strong>, which introduces parameters $k$ to adjust balance between $tf$ and $idf$, and $b$ which controls the importance of document length normalization.</p>
<p>$$
\text{score}(q, d) = \sum_{t \in q} \log \left( \frac{N}{\text{df}<em d="d" t_="t,">t} \right) \cdot \frac{tf</em>
$$}}{k(1 - b + b \cdot \frac{|d|}{|d_{avg}|}) + tf_{t, d}</p>
<p>Where $d_{avg}$ is the average document length in the collection. When $k = 0$, BM25 reverts to no use of term frequency, just like a binary selection of terms in the query (plus idf). A large $k$ results in raw term frequency (plus idf). $b$ ranges from $1$ (scaling by document length) to $0$ (no scaling). Reasonable defaults for these parameters are $k = [1.2, 2.0]$ and $b = 0.75$.</p>
<h4 id="quick-aside-stop-words">Quick aside: stop words</h4>
<p>Stop words are common words that would traditionally be removed from the text before indexing, since they don't add much information. However, tf-idf already does a good job of downweighting common words, so stop words are less important in modern systems, an are often included in the index to make search for phrases easier.</p>
<h3 id="inverted-index">Inverted Index</h3>
<p>Using an inverted index, want to be able to find all documents $d \in C$ that contain a term $q \in Q$. The index is composed of two parts: a <strong>dictionary</strong> and a <strong>postings list</strong>. The dictionary is a collection of terms (designed to be efficiently accessed) which map to a postings list for the term. A posting list is the list of document IDs associated with each term, which can also contain additional metadata (e.g. term frequency, positions, etc.).</p>
<p>This gives us an efficient access pattern for computing tf-idf scores for documents, since we can look up the postings list for each term in the query. However, alternatives, especially for question answering, exist (e.g. <a href="https://aclanthology.org/P17-1171/">Chen et al. 2017</a>).</p>
<h3 id="evaluation">Evaluation</h3>
<p>Use <strong>precision</strong>, the fraction of returned docs that are relevant, and <strong>recall</strong>, the fraction of all relevant docs that are returned.</p>
<p>Assume that each document in our IR system is either relevant or not relevant to a query. Further, let $U$ be the set of all relevant documents, $T$ be the set of ranked documents returned, and $R$ be the set of relevant documents in $T$. Then, we can define precision and recall as:</p>
<p>$$
\text{precision} = \frac{|R|}{|T|} \quad \text{recall} = \frac{|R|}{|U|}
$$</p>
<p>Note that recall always increases, e.g. it isn't penalized by returning an irrelevant document. Precision, on the other hand, can decrease if we return irrelevant documents. It is useful to plot precision-recall curves, which show the tradeoff between precision and recall as we vary the number of documents returned.</p>
<p>$$
\text{InterpolatedPrecision} = \text{maxPrecision}(i) \text{ for } i \ge r
$$</p>
<pre><code class="language-python">def interpolate_PR_curve(precision, recall):
    &quot;&quot;&quot;
    plot averaged precision values at 11 fixed levels of recall (0 to 100 by 10)
    &quot;&quot;&quot;
    recall_levels = np.linspace(0, 1, 11)
    interpolated_precision = np.zeros_like(recall_levels)
    for i, r in enumerate(recall_levels):
        interpolated_precision[i] = np.max(precision[recall &gt;= r])
    return interpolated_precision, recall_levels
</code></pre>
<h4 id="mean-average-precision-map">Mean Average Precision (MAP)</h4>
<p>Assume $R_r$ is the set of relevant documents at or above $r$ in the ranked list. Then, the average precision at $r$ is:</p>
<p>$$
\text{AP} = \frac{1}{|R_r|} \sum_{d \in R_r} \text{Precision}_{r}(d)
$$</p>
<p>Where $\text{Precision}_{r}(d)$ is the precision measured at the rank $r$ where document $d$ was retrieved. For an ensemble of queries $Q$, we average the AP over all queries to get the MAP:</p>
<p>$$
\text{MAP} = \frac{1}{|Q|} \sum_{q \in Q} \text{AP}(q)
$$</p>
<h2 id="ir-with-dense-vectors">IR with Dense Vectors</h2>
<p>tf-idf and BM25 both kind of suck in a way (read vocabulary mismatch problem). Instead, we need to handle synonyms by using dense vectors (as opposed to sparse ones like word counts). This is implemented today via encoders like BERT.</p>
<p>The general approach is to present both the query and the document to a single encoder, allowing the transformer self-attention to see all tokens of both the query and the document, thus also building a representation that is sensitive to the meanings in both. Then, a linear layer can be put on top of the [CLS] token to predict the similarity score for the query and document.</p>
<p>$$
z = BERT(q;[SEP];d)[CLS]
$$</p>
<p>$$
\text{score}(q, d) = \text{softmax}(U(z))
$$</p>
<p>Note: BERT was trained using <code>[CLS] sen A [SEP] sen B [SEP]</code>. <code>[SEP]</code> is used to help the model distinguish between the two sentences. <code>[CLS]</code> is used to represent the entire sentence.</p>
            </div>
            <div class="tags">
                Tags:
                <a href="/tags/bert.html">bert</a>
                <a href="/tags/dense_vectors.html">dense_vectors</a>
                <a href="/tags/interpolated_precision_curve.html">interpolated_precision_curve</a>
                <a href="/tags/inverted%20index.html">inverted index</a>
                <a href="/tags/mean_average_precision.html">mean_average_precision</a>
                <a href="/tags/precision.html">precision</a>
                <a href="/tags/recall.html">recall</a>
                <a href="/tags/tf-idf.html">tf-idf</a>
            </div>
        </article>
    </main>
    <footer role="contentinfo">
        <p>2025, authored by Elijah Melton.</p>
    </footer>
</body>
</html>
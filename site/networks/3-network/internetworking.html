
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Internetworking | Elijah's Notes</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Covers the implementation of internetworking, including how different network types can be connected, and the fundamentals of IP addressing. Discusses the concepts of IPv4 addressing, IP prefixes, and IP datagram forwarding using the longest prefix match algorithm.">
    <meta name="author" content="Elijah Melton">
    <meta name="robots" content="index, follow">
    <meta name="generator" content="Custom Static Site Generator">
    <link rel="canonical" href="https://notes.elimelt.com/networks/3-network/internetworking.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Internetworking">
    <meta property="og:description" content="Covers the implementation of internetworking, including how different network types can be connected, and the fundamentals of IP addressing. Discusses the concepts of IPv4 addressing, IP prefixes, and IP datagram forwarding using the longest prefix match algorithm.">
    <meta property="og:url" content="https://notes.elimelt.com/networks/3-network/internetworking.html">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Internetworking">
    <meta name="twitter:description" content="Covers the implementation of internetworking, including how different network types can be connected, and the fundamentals of IP addressing. Discusses the concepts of IPv4 addressing, IP prefixes, and IP datagram forwarding using the longest prefix match algorithm.">

    <meta name="keywords" content="internetworking,networks,ip addressing">

    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json">
    {"@context": "https://schema.org", "@type": "Article", "headline": "Internetworking", "dateModified": "2025-02-11T20:47:59.615405", "description": "Covers the implementation of internetworking, including how different network types can be connected, and the fundamentals of IP addressing. Discusses the concepts of IPv4 addressing, IP prefixes, and IP datagram forwarding using the longest prefix match algorithm.", "articleSection": "Networks", "keywords": "internetworking,networks,ip addressing"}
    </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js"></script>

    <!-- Configure KaTeX auto-render -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "\[", right: "\]", display: true},
                    {left: "$", right: "$", display: false},
                ],
                preProcess: (math) => {
                    console.log("Pre-processing: " + math);
                    math = math.split("\n").map((line) => {
                        if (line.endsWith("\\")) {
                            return line + "\\";
                        }
                        return line;
                    }).join("\n");
                    return math;
                },
                throwOnError: false
            });
        });
    </script>

<style>
    :root {
    --text-color: #1a1a1a;
    --background-color: #ffffff;
    --accent-color: #2563eb;
    --accent-light: rgba(37, 99, 235, 0.1);
    --border-color: #e5e7eb;
    --nav-background: rgba(255, 255, 255, 0.95);
    --code-background: #f3f4f6;
    --transition-speed: 0.2s;
    --content-width: 50rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 1rem;
    --spacing-lg: 2rem;
    --spacing-xl: 3rem;
    --radius-sm: 4px;
    --radius-md: 8px;
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.05);
    --shadow-md: 0 4px 6px rgba(0,0,0,0.05), 0 1px 3px rgba(0,0,0,0.1);
}

@media (prefers-color-scheme: dark) {
    :root {
        --text-color: #f3f4f6;
        --background-color: #1a1a1a;
        --accent-color: #60a5fa;
        --accent-light: rgba(96, 165, 250, 0.1);
        --border-color: #374151;
        --nav-background: rgba(26, 26, 26, 0.95);
        --code-background: #2d3748;
    }
}

/* Reset and base styles */
*, *::before, *::after {
    box-sizing: border-box;
}

html {
    font-size: 100%;
    scroll-behavior: smooth;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    line-height: 1.6;
    max-width: var(--content-width);
    margin: 0 auto;
    padding: var(--spacing-md);
    color: var(--text-color);
    background: var(--background-color);
    transition: background-color var(--transition-speed), color var(--transition-speed);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

@media (min-width: 768px) {
    body {
        padding: var(--spacing-lg);
    }
}

/* Improved navigation */
nav {
    position: sticky;
    top: 0;
    background: var(--nav-background);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--border-color);
    padding: var(--spacing-md) 0;
    margin: calc(-1 * var(--spacing-md));
    margin-bottom: var(--spacing-lg);
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
    z-index: 1000;
    width: calc(100% + var(--spacing-md) * 2);
    padding-left: var(--spacing-md);
    padding-right: var(--spacing-md);
    box-shadow: var(--shadow-sm);
}

@media (min-width: 768px) {
    nav {
        margin: calc(-1 * var(--spacing-lg));
        width: calc(100% + var(--spacing-lg) * 2);
        padding-left: var(--spacing-lg);
        padding-right: var(--spacing-lg);
        gap: var(--spacing-md);
    }
}

nav a {
    color: var(--accent-color);
    text-decoration: none;
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-sm);
    transition: background-color var(--transition-speed), color var(--transition-speed);
    font-weight: 500;
}

nav a:hover, nav a:focus {
    background-color: var(--accent-light);
    outline: none;
}

nav a:focus-visible {
    outline: 2px solid var(--accent-color);
    outline-offset: 2px;
}

/* Improved breadcrumbs */
.breadcrumbs {
    margin-bottom: var(--spacing-lg);
    color: var(--text-color);
    opacity: 0.8;
    font-size: 0.9rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: center;
}

.breadcrumbs a {
    color: var(--accent-color);
    text-decoration: none;
    transition: color var(--transition-speed);
}

.breadcrumbs a:hover {
    text-decoration: underline;
}

.breadcrumbs span:not(:last-child)::after {
    content: "/";
    margin-left: 0.5rem;
    opacity: 0.5;
}

/* Article styles */
article {
    margin-bottom: var(--spacing-xl);
}

h1, h2, h3, h4, h5, h6 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-md);
    line-height: 1.3;
    font-weight: 600;
}

h1 {
    font-size: 2rem;
    margin-top: 0;
}

h2 {
    font-size: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
}

/* Meta information styling */
.meta {
    color: var(--text-color);
    opacity: 0.8;
    font-size: 0.9rem;
    margin-bottom: var(--spacing-lg);
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-md);
    padding-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--border-color);
}

/* Improved code blocks */
code {
    background: var(--code-background);
    padding: 0.2rem 0.4rem;
    border-radius: var(--radius-sm);
    font-size: 0.9em;
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
}

pre {
    background: var(--code-background);
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
    overflow-x: auto;
    margin: var(--spacing-lg) 0;
    box-shadow: var(--shadow-sm);
}

pre code {
    background: none;
    padding: 0;
    border-radius: 0;
}

/* Improved links */
a {
    color: var(--accent-color);
    text-decoration: none;
    transition: color var(--transition-speed);
}

a:hover {
    text-decoration: underline;
}

/* Improved image handling */
img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    margin: var(--spacing-lg) 0;
    display: block;
    box-shadow: var(--shadow-md);
}

/* Table improvements */
table {
    width: 100%;
    border-collapse: collapse;
    margin: var(--spacing-lg) 0;
    overflow-x: auto;
    display: block;
    border-radius: var(--radius-sm);
    box-shadow: var(--shadow-sm);
}

@media (min-width: 768px) {
    table {
        display: table;
    }
}

th, td {
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    text-align: left;
}

th {
    background: var(--border-color);
    font-weight: 600;
}

/* Tags styling */
.tags {
    margin-top: var(--spacing-lg);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-color);
}

.tags a {
    display: inline-block;
    background: var(--border-color);
    color: var(--text-color);
    padding: 0.2rem 0.6rem;
    border-radius: var(--radius-sm);
    text-decoration: none;
    font-size: 0.9em;
    margin-right: 0.5rem;
    margin-bottom: 0.5rem;
    transition: background-color var(--transition-speed), color var(--transition-speed);
}

.tags a:hover {
    background: var(--accent-color);
    color: white;
    text-decoration: none;
}

/* Footer improvements */
footer {
    margin-top: var(--spacing-xl);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-color);
    text-align: center;
    font-size: 0.9rem;
    opacity: 0.8;
}

/* Blockquote styling */
blockquote {
    margin: var(--spacing-lg) 0;
    padding-left: var(--spacing-md);
    border-left: 4px solid var(--accent-color);
    color: var(--text-color);
    opacity: 0.9;
    font-style: italic;
}

/* Improved KaTeX rendering */
.katex-display {
    overflow: auto hidden;
    padding: var(--spacing-md) 0;
    margin: var(--spacing-md) 0;
    background: var(--accent-light);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
}

.katex-display > .katex {
    white-space: normal;
}

.katex {
    font-size: 1.1em;
    line-height: 1.2;
}

.katex-display .katex {
    display: block;
    text-align: center;
}

.katex-display > .katex > .katex-html {
    display: block;
    max-width: 100%;
    overflow-x: auto;
    padding: 0.5em 0;
    min-height: 40px;
}

/* Index page styling */
.landing-stats {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    justify-content: space-around;
}

.stat-item {
    text-align: center;
    padding: var(--spacing-md);
    background: var(--accent-light);
    border-radius: var(--radius-md);
    flex: 1;
    min-width: 100px;
    box-shadow: var(--shadow-sm);
}

.stat-value {
    display: block;
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--accent-color);
}

.stat-label {
    font-size: 0.9rem;
    opacity: 0.8;
}

.landing-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-lg);
}

@media (min-width: 768px) {
    .landing-grid {
        grid-template-columns: 3fr 1fr;
    }

    .recent-section {
        grid-column: 1 / 2;
    }

    .categories-section, .tags-section {
        grid-column: 2 / 3;
    }
}

.recent-posts, .categories-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.recent-posts li, .categories-list li {
    padding: var(--spacing-sm) 0;
    border-bottom: 1px solid var(--border-color);
}

.recent-posts li:last-child, .categories-list li:last-child {
    border-bottom: none;
}

.recent-posts .date, .recent-posts .category, .categories-list .count {
    font-size: 0.85rem;
    opacity: 0.7;
    margin-left: var(--spacing-sm);
}

.tags-cloud {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
}

.tags-cloud a {
    padding: var(--spacing-sm) var(--spacing-md);
    background: var(--border-color);
    border-radius: var(--radius-sm);
    text-decoration: none;
    transition: background-color var(--transition-speed), color var(--transition-speed);
}

.tags-cloud a:hover {
    background: var(--accent-color);
    color: white;
    text-decoration: none;
}

.tag-size-1 { font-size: 0.8rem; }
.tag-size-2 { font-size: 0.9rem; }
.tag-size-3 { font-size: 1rem; }
.tag-size-4 { font-size: 1.1rem; }
.tag-size-5 { font-size: 1.2rem; }

/* Focus styles for accessibility */
*:focus-visible {
    outline: 2px solid var(--accent-color);
    outline-offset: 2px;
}

/* Print styles */
@media print {
    nav, .breadcrumbs, .tags, footer {
        display: none;
    }

    body {
        max-width: none;
        padding: 0;
        color: black;
        background: white;
    }

    a {
        color: black;
        text-decoration: underline;
    }

    .content {
        max-width: 100%;
    }
}
</style></head>
<body>
    <header>
        <nav role="navigation" aria-label="Main navigation">
            <a href="/index.html">Home</a>
<a href="/categories/index.html">Categories</a>
<a href="/tags/index.html">Tags</a>
        </nav>
        <div class="breadcrumbs" role="navigation" aria-label="Breadcrumb">
            <a href="/index.html">Home</a> » <a href="/categories/networks.html">Networks</a> » Internetworking
        </div>
    </header>
    <main role="main">
        <article>
            <h1>Internetworking</h1>
            <div class="meta">
                <time datetime="2025-02-11T20:47:59.615405">
                    Last modified: 2025-02-11
                </time>
                <span>Category: <a href="/categories/networks.html">Networks</a></span>
            </div>
            <div class="content">
                <h1 id="internetworking">Internetworking</h1>
<h2 id="how-netorks-may-differ">How netorks may differ</h2>
<ul>
<li>Serive model (datagrams vs virtual circuits)</li>
<li>Addressing</li>
<li>QOS (priorities)</li>
<li>Packet size</li>
<li>Security (encryption, authentication)</li>
</ul>
<p>Internetworking hides the difference with a common prorocol (IP) and a common addressing scheme (IP addresses).</p>
<h3 id="connecting-datagram-and-virtual-circuit-networks">Connecting Datagram and Virtual Circuit Networks</h3>
<p>Need to map a destination address to a VC and visa versa. In order to accomplish this, might have to set up a VC between two routers, and then use datagrams to send packets between the routers.</p>
<pre><code class="language-plaintext">+--------+   802.11   +--------+ &lt;---- MPLS ----&gt; +--------+  Ethernet  +--------+
|  host  |------------| Router |                  | Router |------------|  host  |
+--------+            +--------+ &lt;--------------&gt; +--------+            +--------+
 source                            VC network                           destination
</code></pre>
<h2 id="ip-addressing">IP Addressing</h2>
<p>IP is the lowest common denominator of the internet. It allows networks that support entirely different services to communicate. Asks very little of the underlying network, and provides very little in return.</p>
<ul>
<li>IPv4 uses 32-bit addresses written in "dotted quad" notation (Four 8-bit numbers separated by dots).</li>
<li>Ex: <code>255.255.255.0</code></li>
<li>IPv6 uses 128-bit addresses written in hexadecimal notation.</li>
<li>Ex: <code>2001:0db8:85a3:0000:0000:8a2e:0370:7334</code></li>
</ul>
<h3 id="ipv4">IPv4</h3>
<pre><code class="language-plaintext">
&lt;--------------------------------------- 32 bits ---------------------------------------&gt;

+---------------------+---------------------+---------------------+---------------------+
| Version |    IHL    |   Dif. Services     |         Total Length (bytes)              |
+---------------------+---------------------+---------------------+---------------------+
|              Identification               |    | DF | MF |  Fragment Offset (13 bits) |
+---------------------+---------------------+---------------------+---------------------+
|  Time to Live (TTL) | Protocol (TCP, UDP) |            Header Checksum                |
+---------------------+---------------------+---------------------+---------------------+
|                               Source IP Address (32 bits)                             |
+---------------------+---------------------+---------------------+---------------------+
|                            Destination IP Address (32 bits)                           |
+---------------------+---------------------+---------------------+---------------------+
|                                  Options (0 or more words)                            |
|                                                                                       |
|                                        ....                                           |
+---------------------+---------------------+---------------------+---------------------+
|                                       Payload                                         |
|                                                                                       |
|                                        ....                                           |
+---------------------+---------------------+---------------------+---------------------+

</code></pre>
<h3 id="ip-prefixes">IP Prefixes</h3>
<ul>
<li>Addresses allocated in blocks called "prefixes".</li>
<li>Addresses in an L-bit prefix have the first L bits in common.</li>
<li>There are $2^{32-L}$ addresses in an L-bit prefix.</li>
<li>Written in "addr/prefix" notation.</li>
<li>Ex: <code>128.13.0.0/16</code> is a 16-bit prefix and contains $2^{32-16} = 65536$ addresses.</li>
<li>Originally, IP addresses were allocated in fixed size blocks to a designated class. Still are, but class is now ignored in favor of CIDR (Classless Inter-Domain Routing).</li>
<li>Class A: $2^{24}$ addresses</li>
<li>Class B: $2^{16}$ addresses</li>
<li>Class C: $2^{8}$ addresses</li>
</ul>
<h4 id="example">Example:</h4>
<p><code>128.13.0.0/16</code></p>
<pre><code class="language-plaintext">        Network                Host
+----------+----------+----------+----------+
| 10000000 | 00001101 |   ....   |   ....   |
+----------+----------+----------+----------+
</code></pre>
<h2 id="ip-datagram-forwarding">IP Datagram Forwarding</h2>
<p>When a host wants to send a packet to another host, it first checks if the destination IP address is on the same network (matching subnet). If it is, it can send the packet directly over the link layer (using ARP to get resolve IP address to MAC address). Otherwise, it sends the packet to the <em>default gateway</em>, or <strong>router</strong>.</p>
<p>The router then forwards the packet to its <strong>next hop</strong> based on the destination IP and the router's routing table.</p>
<pre><code class="language-python">if (NetworkNum of destination = NetworkNum of one of my interfaces):
    deliver packet to destination over that interface (using ARP)
else:
    if (NetworkNum of destination is in my forwarding table):
        deliver packet to NextHop router
    else:
        deliver packet to default router
</code></pre>
<h4 id="longest-prefix-match">Longest Prefix Match</h4>
<ul>
<li>For each packet, find the longest prefix that contains the destination address, ie. the most specific match.</li>
<li>forward the packet to the next hop for that prefix.</li>
</ul>
<pre><code class="language-python">for each entry in the forwarding table:
    if (NetworkNum of destination &amp; Mask) == (NetworkNum of entry &amp; Mask):
        deliver packet to NextHop router
</code></pre>
<ul>
<li><a href="#internetworking">Internetworking</a></li>
<li><a href="#how-netorks-may-differ">How netorks may differ</a><ul>
<li><a href="#connecting-datagram-and-virtual-circuit-networks">Connecting Datagram and Virtual Circuit Networks</a></li>
</ul>
</li>
<li><a href="#ip-addressing">IP Addressing</a><ul>
<li><a href="#ipv4">IPv4</a></li>
<li><a href="#ip-prefixes">IP Prefixes</a></li>
<li><a href="#example:">Example:</a></li>
</ul>
</li>
<li><a href="#ip-datagram-forwarding">IP Datagram Forwarding</a><ul>
<li><a href="#longest-prefix-match">Longest Prefix Match</a></li>
</ul>
</li>
</ul>
            </div>
            <div class="tags">
                Tags:
                <a href="/tags/internetworking.html">internetworking</a>
                <a href="/tags/ip%20addressing.html">ip addressing</a>
                <a href="/tags/networks.html">networks</a>
            </div>
        </article>
    </main>
    <footer role="contentinfo">
        <p>2025, authored by Elijah Melton.</p>
    </footer>
</body>
</html>
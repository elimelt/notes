<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lambdas And Streams</title>
    
    <style>
        :root {
            --text-color: #2c3e50;
            --background-color: #ffffff;
            --accent-color: #3498db;
            --border-color: #ecf0f1;
            --nav-background: rgba(255, 255, 255, 0.9);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --text-color: #ecf0f1;
                --background-color: #2c3e50;
                --accent-color: #3498db;
                --border-color: #34495e;
                --nav-background: rgba(44, 62, 80, 0.9);
            }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            line-height: 1.6;
            max-width: 50rem;
            margin: 0 auto;
            padding: 2rem;
            color: var(--text-color);
            background: var(--background-color);
        }

        nav {
            position: sticky;
            top: 0;
            background: var(--nav-background);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 0;
            margin-bottom: 2rem;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            z-index: 1000;
        }

        nav a {
            color: var(--accent-color);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        nav a:hover {
            background-color: var(--border-color);
        }

        .breadcrumbs {
            margin-bottom: 2rem;
            color: var(--text-color);
            opacity: 0.8;
        }

        .breadcrumbs a {
            color: var(--accent-color);
            text-decoration: none;
        }

        .content {
            margin-top: 2rem;
        }

        h1, h2, h3, h4, h5, h6 {
            margin-top: 2rem;
            margin-bottom: 1rem;
            line-height: 1.3;
        }

        code {
            background: var(--border-color);
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-size: 0.9em;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
        }

        pre {
            background: var(--border-color);
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        pre code {
            background: none;
            padding: 0;
            border-radius: 0;
        }

        img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
            margin: 1.5rem 0;
        }

        .meta {
            color: var(--text-color);
            opacity: 0.8;
            font-size: 0.9em;
            margin-bottom: 2rem;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .tags {
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .tags a {
            display: inline-block;
            background: var(--border-color);
            color: var(--text-color);
            padding: 0.2rem 0.6rem;
            border-radius: 3px;
            text-decoration: none;
            font-size: 0.9em;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .tags a:hover {
            background: var(--accent-color);
            color: white;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
        }

        th, td {
            padding: 0.75rem;
            border: 1px solid var(--border-color);
        }

        th {
            background: var(--border-color);
        }

        blockquote {
            margin: 1.5rem 0;
            padding-left: 1rem;
            border-left: 4px solid var(--accent-color);
            color: var(--text-color);
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <nav>
        <a href="/index.html">Home</a>
    </nav>
    <main>
        <div class="breadcrumbs">
            <a href="/index.html">Home</a> Â» Lambdas And Streams
        </div>
        <h1>Lambdas And Streams</h1>
        <div class="meta">
            <span>Last modified: 2024-12-08</span>
            
        </div>
        <div class="content">
            <h1 id="a-soft-introduction-to-java-streams-and-lambdas">A Soft Introduction to Java Streams and Lambdas</h1>
<h2 id="motivation">Motivation</h2>
<p>If you've been programming in Java for a while (perhaps you're coming out of the 12x/14x series at UW), you're probably familiar with the regular <em>imperative</em> style of programming using loops and conditionals. There's nothing wrong with this, but often times, you'll find yourself writing a lot of code for simple operations.</p>
<p>For example, consider the following code snippet:</p>
<pre><code class="language-java">List&lt;User&gt; getAdmins(List&lt;User&gt; users) {
    List&lt;User&gt; admins = new ArrayList&lt;&gt;();
    for (User user : users) {
        if (user.isAdmin()) {
            admins.add(user);
        }
    }
    return admins;
}
</code></pre>
<p>At a high level, we iterate over the provided list of users, and filter for those that are admins.</p>
<p>Perhaps you're also trying to make sure that <em>all</em> users are admins:</p>
<pre><code class="language-java">boolean allAdmins(List&lt;User&gt; users) {
    for (User user : users) {
        if (!user.isAdmin()) {
            return false;
        }
    }
    return true;
}
</code></pre>
<p>You've probably written similar code snippets hundreds of times. To reiterate, there's nothing wrong with this style of programming, but for a relatively simple operation, you're writing a lot of code.</p>
<p>What's arguably better is to use a more <em>declarative</em> style of programming. This is where Java Streams and Lambdas come in.</p>
<h2 id="java-streams">Java Streams</h2>
<p>Java Streams are in some way similar to Iterators, but with a lot more functionality. They allow you to perform operations on a collection of elements in a more compositional way. For example, consider the following code snippet:</p>
<pre><code class="language-java">List&lt;User&gt; admins = users.stream()
    .filter(user -&gt; user.isAdmin())
    .collect(Collectors.toList());

// note while using collect(Collectors.to*()) is going to work in most cases,
// when terminating a stream to a list you can also use the toList() method
List&lt;User&gt; admins = users.stream().filter(User::isAdmin).toList();
</code></pre>
<p>There's a lot going on here, I know. Let's break it down:</p>
<ul>
<li><code>users.stream()</code>: This converts the list of users into a Stream (<code>java.util.stream.Stream</code>).</li>
<li><code>user -&gt; user.isAdmin()</code>: This is a Lambda expression. It's a way of passing a function as an argument. In this case, we're passing a function that takes a <code>User</code> object and returns a boolean. Alternatively, you could write this as <code>User::isAdmin</code>, meaning we call the <code>isAdmin</code> method on the <code>User</code> object passed in as an argument.</li>
<li><code>filter(...)</code>: This is an intermediate operation. It takes a predicate (a function that returns a boolean) and filters out elements that don't satisfy the predicate.</li>
<li><code>collect(...)</code>: This is a terminal operation. It collects the elements of the Stream into a list.</li>
</ul>
<h2 id="lambdas">Lambdas</h2>
<p>Lambdas are a way of defining functions without having to explicitly define a class or method. They're particularly useful when you want to pass a function as an argument to another function. Here are some different ways you can use lambdas:</p>
<pre><code class="language-java">// A lambda that takes no arguments and returns void
Runnable r = () -&gt; System.out.println(&quot;Hello, world!&quot;);

// A lambda that takes two integers and returns an integer
BiFunction&lt;Integer, Integer, Integer&gt; add = (a, b) -&gt; a + b;

// A lambda that takes a string and returns a string
Function&lt;String, String&gt; toUpperCase = s -&gt; s.toUpperCase();

// A lambda that takes a string and returns a boolean
Predicate&lt;String&gt; isEmpty = s -&gt; s.isEmpty();
</code></pre>
<p>Luckily, you don't need to remember all of these interfaces. More often than not, you're going to define lambdas without ever assigning them to a variable. In cases where you do need to assign them to a variable, you can use the <code>var</code> keyword.</p>
<h2 id="common-operations">Common Operations</h2>
<p>Here are some examples of iterative vs. stream-based operations:</p>
<h3 id="filtering">Filtering</h3>
<pre><code class="language-java">// Imperative
List&lt;User&gt; admins = new ArrayList&lt;&gt;();
for (User user : users) {
    if (user.isAdmin()) {
        admins.add(user);
    }
}

// Declarative
List&lt;User&gt; admins = users.stream()
    .filter(User::isAdmin)
    .toList();
</code></pre>
<h3 id="mapping">Mapping</h3>
<pre><code class="language-java">// Imperative
List&lt;String&gt; names = new ArrayList&lt;&gt;();
for (User user : users) {
    names.add(user.getName());
}

// Declarative
List&lt;String&gt; names = users.stream().map(User::getName).toList();
</code></pre>
<h3 id="all-match">All match</h3>
<pre><code class="language-java">// Imperative
boolean allAdmins = true;
for (User user : users) {
    if (!user.isAdmin()) {
        allAdmins = false;
        break;
    }
}

// Declarative
boolean allAdmins = users.stream().allMatch(User::isAdmin);
</code></pre>
<h3 id="any-match">Any match</h3>
<pre><code class="language-java">// Imperative
boolean anyAdmins = false;
for (User user : users) {
    if (user.isAdmin()) {
        anyAdmins = true;
        break;
    }
}

// Declarative
boolean anyAdmins = users.stream().anyMatch(User::isAdmin);
</code></pre>
<h3 id="sum">Sum</h3>
<pre><code class="language-java">// Imperative
int sum = 0;
for (int i : numbers) {
    sum += i;
}

// Declarative
int sum = numbers.stream().reduce(0, Integer::sum);

// alternatively, you can use the sum() method
int sum = numbers.stream().mapToInt(Integer::intValue).sum();

// or Collectors.summingInt()
int sum = numbers.stream().collect(Collectors.summingInt(Integer::intValue));

</code></pre>
<h3 id="grouping">Grouping</h3>
<pre><code class="language-java">// Imperative
Map&lt;String, List&lt;User&gt;&gt; usersByRole = new HashMap&lt;&gt;();
for (User user : users) {
    usersByRole.computeIfAbsent(
      user.getRole(), k -&gt; new ArrayList&lt;&gt;()
    ).add(user);
}

// Declarative
Map&lt;String, List&lt;User&gt;&gt; usersByRole = users.stream()
    .collect(Collectors.groupingBy(User::getRole));
</code></pre>
        </div>
        
    </main>
</body>
</html>